{% load i18n %}

<form class="ui form{% if form.has_changed and not form.is_valid %} error{% endif %}" action="{% url 'users:profile:edit' name='password' %}" method="post">
    {% csrf_token %}

    {% for field in form %}
        {% include 'userflow/forms/_field.html' %}
    {% endfor %}

    {% if form.user.has_usable_password %}
        <input type="submit" name="submit" value="{% trans 'Change password' %}" class="ui primary button">
    {% else %}
        <input type="submit" name="submit" value="{% trans 'Set password' %}" class="ui primary button">
    {% endif %}

</form>
